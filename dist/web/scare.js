async function Ot(cr={}){var P,y=cr;if(0)var Et;let h,O,S,X=()=>{};y.start=function(e){if(h=e.Dialog,!h.async)throw new Error("Emglken requires an async Dialog library");O=e.GlkOte,e.accept=lr,ar(e.arguments),O.init(e)};function lr(e){S&&console.warn("Already have GlkOte event when next event arrives"),S=e,X()}y.locateFile=function(e){try{return new URL(e,import.meta.url).href}catch{return e}};var sr=[],Y="./this.program",Q=(e,r)=>{throw r},or=import.meta.url,E="";function ur(e){return y.locateFile?y.locateFile(e,E):E+e}var Z,x;if(0)var Bt;else{try{E=new URL(".",or).href}catch{}Z=async e=>{var r=await fetch(e,{credentials:"same-origin"});if(r.ok)return r.arrayBuffer();throw new Error(r.status+" : "+r.url)}}var fr=console.log.bind(console),A=console.error.bind(console),b,g=!1,T,Wt=e=>e.startsWith("file://"),ee,re,m,p,vr,_r,R,_,yr,dr,te,hr,ie=!1,B=!1;function ne(){var e=D.buffer;m=new Int8Array(e),vr=new Int16Array(e),p=new Uint8Array(e),_r=new Uint16Array(e),R=new Int32Array(e),_=new Uint32Array(e),yr=new Float32Array(e),dr=new Float64Array(e),te=new BigInt64Array(e),hr=new BigUint64Array(e)}function Ht(){}function gr(){ie=!0,w.W()}function Lt(){}function mr(){Te(),it(),B=!0}function Vt(){}function F(e){e="Aborted("+e+")",A(e),g=!0,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw re?.(r),r}var W;function pr(){return y.locateFile?ur("scare.wasm"):new URL("scare.wasm",import.meta.url).href}function wr(e){if(e==W&&b)return new Uint8Array(b);if(x)return x(e);throw"both async and sync fetching of the wasm failed"}async function kr(e){if(!b)try{var r=await Z(e);return new Uint8Array(r)}catch{}return wr(e)}async function Sr(e,r){try{var t=await kr(e),i=await WebAssembly.instantiate(t,r);return i}catch(n){A(`failed to asynchronously prepare wasm: ${n}`),F(n)}}async function Ar(e,r,t){if(!e)try{var i=fetch(r,{credentials:"same-origin"}),n=await WebAssembly.instantiateStreaming(i,t);return n}catch(a){A(`wasm streaming compile failed: ${a}`),A("falling back to ArrayBuffer instantiation")}return Sr(r,t)}function br(){return{a:dt}}async function Rr(){function e(a,s){return w=a.exports,w=c.instrumentWasmExports(w),yt(w),ne(),w}function r(a){return e(a.instance)}var t=br();W??=pr();var i=await Ar(b,W,t),n=r(i);return n}class ae{name="ExitStatus";constructor(r){this.message=`Program terminated with exit(${r})`,this.status=r}}var o={},f=e=>Ue(e),v=()=>Pe(),jr=(e,r)=>(t=>K(e,t))(r),k=0;class ce{constructor(r){this.excPtr=r,this.ptr=r-24}set_type(r){_[this.ptr+4>>2]=r}get_type(){return _[this.ptr+4>>2]}set_destructor(r){_[this.ptr+8>>2]=r}get_destructor(){return _[this.ptr+8>>2]}set_caught(r){r=r?1:0,m[this.ptr+12]=r}get_caught(){return m[this.ptr+12]!=0}set_rethrown(r){r=r?1:0,m[this.ptr+13]=r}get_rethrown(){return m[this.ptr+13]!=0}init(r,t){this.set_adjusted_ptr(0),this.set_type(r),this.set_destructor(t)}set_adjusted_ptr(r){_[this.ptr+16>>2]=r}get_adjusted_ptr(){return _[this.ptr+16>>2]}}var I=e=>Me(e),Cr=e=>{var r=k;if(!r)return I(0),0;var t=new ce(r);t.set_adjusted_ptr(r);var i=t.get_type();if(!i)return I(0),r;for(var n of e){if(n===0||n===i)break;var a=t.ptr+16;if(Oe(n,i,a))return I(n),r}return I(i),r},Nr=()=>Cr([]),Tr=0,Fr=(e,r,t)=>{var i=new ce(e);throw i.init(r,t),k=e,Tr++,k},Ir=e=>{throw k||(k=e),k},Mr=(e,r)=>{},Ur=()=>F(""),M=0,Dr=()=>{M=0},Pr=()=>{throw 1/0},j={},H=e=>{if(e instanceof ae||e=="unwind")return T;Q(1,e)},L=()=>M>0,le=e=>{T=e,L()||(g=!0),Q(e,new ae(e))},se=(e,r)=>{T=e,L()||mr(),le(e)},oe=se,Or=()=>{if(!B&&!L())try{oe(T)}catch(e){H(e)}},ue=e=>{if(!(B||g))try{e(),Or()}catch(r){H(r)}},fe=()=>performance.now(),Er=(e,r)=>{if(j[e]&&(clearTimeout(j[e].id),delete j[e]),!r)return 0;var t=setTimeout(()=>{delete j[e],ue(()=>Ie(e,fe()))},r);return j[e]={id:t,timeout_ms:r},0},ve=()=>Date.now(),Br=1,Wr=e=>e>=0&&e<=3,Hr=9007199254740992,Lr=-9007199254740992,_e=e=>e<Lr||e>Hr?NaN:Number(e);function Vr(e,r,t){if(r=_e(r),!Wr(e))return 28;var i;if(e===0)i=ve();else if(Br)i=fe();else return 52;var n=Math.round(i*1e3*1e3);return te[t>>3]=BigInt(n),0}function ye(e,r){let t=J(r.length);m.set(r,t),R[e>>2]=t,R[e+4>>2]=r.length}function de(e,r){let t=JSON.stringify(r);ye(e,ut.encode(t))}var he=new TextDecoder,ge=(e,r,t,i)=>{var n=r+t;if(i)return n;for(;e[r]&&!(r>=n);)++r;return r},C=(e,r,t)=>{if(!e)return"";var i=ge(p,e,r,t);return he.decode(p.subarray(e,i))},me=function(r,t){return c.handleAsync(async()=>{let i=C(r,t);await h.delete(i)})};me.isAsync=!0;var pe=function(r,t){return c.handleAsync(async()=>{let i=C(r,t);return h.exists(i)})};pe.isAsync=!0;var we=function(){return c.handleAsync(async()=>{await h.write($),$={}})};we.isAsync=!0;var ke=function(r,t,i){return c.handleAsync(async()=>{let n=C(r,t),a=await h.read(n);return a?(ye(i,a),!0):!1})};ke.isAsync=!0;function zr(e,r,t,i){let n=C(e,r),a=m.subarray(t,t+i);$[n]=a}function qr(e){let r=h.get_dirs();de(e,r)}var Se=function(r){return c.handleAsync(async()=>{S||await new Promise(t=>{X=t}),de(r,S),S=null})};Se.isAsync=!0;function $r(e,r){let t=JSON.parse(C(e,r));O.update(t)}var Jr=()=>2147483648,Kr=(e,r)=>Math.ceil(e/r)*r,Gr=e=>{var r=D.buffer.byteLength,t=(e-r+65535)/65536|0;try{return D.grow(t),ne(),1}catch{}},Xr=e=>{var r=p.length;e>>>=0;var t=Jr();if(e>t)return!1;for(var i=1;i<=4;i*=2){var n=r*(1+.2/i);n=Math.min(n,e+100663296);var a=Math.min(t,Kr(Math.max(e,n),65536)),s=Gr(a);if(s)return!0}return!1},V={},Yr=()=>Y||"./this.program",N=()=>{if(!N.strings){var e=(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Yr()};for(var t in V)V[t]===void 0?delete r[t]:r[t]=V[t];var i=[];for(var t in r)i.push(`${t}=${r[t]}`);N.strings=i}return N.strings},Qr=(e,r,t,i)=>{if(!(i>0))return 0;for(var n=t,a=t+i-1,s=0;s<e.length;++s){var l=e.codePointAt(s);if(l<=127){if(t>=a)break;r[t++]=l}else if(l<=2047){if(t+1>=a)break;r[t++]=192|l>>6,r[t++]=128|l&63}else if(l<=65535){if(t+2>=a)break;r[t++]=224|l>>12,r[t++]=128|l>>6&63,r[t++]=128|l&63}else{if(t+3>=a)break;r[t++]=240|l>>18,r[t++]=128|l>>12&63,r[t++]=128|l>>6&63,r[t++]=128|l&63,s++}}return r[t]=0,t-n},Ae=(e,r,t)=>Qr(e,p,r,t),Zr=(e,r)=>{var t=0,i=0;for(var n of N()){var a=r+t;_[e+i>>2]=a,t+=Ae(n,a,1/0)+1,i+=4}return 0},be=e=>{for(var r=0,t=0;t<e.length;++t){var i=e.charCodeAt(t);i<=127?r++:i<=2047?r+=2:i>=55296&&i<=57343?(r+=4,++t):r+=3}return r},xr=(e,r)=>{var t=N();_[e>>2]=t.length;var i=0;for(var n of t)i+=be(n)+1;return _[r>>2]=i,0},et=e=>52;function rt(e,r,t,i){return r=_e(r),70}var z=[null,[],[]],tt=(e,r=0,t,i)=>{var n=ge(e,r,t,i);return he.decode(e.buffer?e.subarray(r,n):new Uint8Array(e.slice(r,n)))},q=(e,r)=>{var t=z[e];r===0||r===10?((e===1?fr:A)(tt(t)),t.length=0):t.push(r)},it=()=>{Fe(0),z[1].length&&q(1,10),z[2].length&&q(2,10)},nt=(e,r,t,i)=>{for(var n=0,a=0;a<t;a++){var s=_[r>>2],l=_[r+4>>2];r+=8;for(var d=0;d<l;d++)q(e,p[s+d]);n+=l}return _[i>>2]=n,0},at=()=>{if(0)var e;return r=>crypto.getRandomValues(r)},Re=e=>{(Re=at())(e)},ct=(e,r)=>(Re(p.subarray(e,e+r)),0),je=e=>De(e),lt=e=>{var r=be(e)+1,t=je(r);return Ae(e,t,r),t},U=e=>{try{return e()}catch(r){F(r)}},st=()=>{M+=1},ot=()=>{M-=1},c={instrumentWasmImports(e){var r=/^(invoke_.*|__asyncjs__.*)$/;for(let[t,i]of Object.entries(e))if(typeof i=="function"){let n=i.isAsync||r.test(t)}},instrumentFunction(e){var r=(...t)=>{c.exportCallStack.push(e);try{return e(...t)}finally{if(!g){var i=c.exportCallStack.pop();c.maybeStopUnwind()}}};return c.funcWrappers.set(e,r),r},instrumentWasmExports(e){var r={};for(let[i,n]of Object.entries(e))if(typeof n=="function"){var t=c.instrumentFunction(n);r[i]=t}else r[i]=n;return r},State:{Normal:0,Unwinding:1,Rewinding:2,Disabled:3},state:0,StackSize:8192,currData:null,handleSleepReturnValue:0,exportCallStack:[],callstackFuncToId:new Map,callStackIdToFunc:new Map,funcWrappers:new Map,callStackId:0,asyncPromiseHandlers:null,sleepCallbacks:[],getCallStackId(e){if(!c.callstackFuncToId.has(e)){var r=c.callStackId++;c.callstackFuncToId.set(e,r),c.callStackIdToFunc.set(r,e)}return c.callstackFuncToId.get(e)},maybeStopUnwind(){c.currData&&c.state===c.State.Unwinding&&c.exportCallStack.length===0&&(c.state=c.State.Normal,st(),U(tr),typeof Fibers<"u"&&Fibers.trampoline())},whenDone(){return new Promise((e,r)=>{c.asyncPromiseHandlers={resolve:e,reject:r}})},allocateData(){var e=J(12+c.StackSize);return c.setDataHeader(e,e+12,c.StackSize),c.setDataRewindFunc(e),e},setDataHeader(e,r,t){_[e>>2]=r,_[e+4>>2]=r+t},setDataRewindFunc(e){var r=c.exportCallStack[0],t=c.getCallStackId(r);R[e+8>>2]=t},getDataRewindFunc(e){var r=R[e+8>>2],t=c.callStackIdToFunc.get(r);return t},doRewind(e){var r=c.getDataRewindFunc(e),t=c.funcWrappers.get(r);return ot(),t()},handleSleep(e){if(!g){if(c.state===c.State.Normal){var r=!1,t=!1;e((i=0)=>{if(!g&&(c.handleSleepReturnValue=i,r=!0,!!t)){c.state=c.State.Rewinding,U(()=>ir(c.currData)),typeof MainLoop<"u"&&MainLoop.func&&MainLoop.resume();var n,a=!1;try{n=c.doRewind(c.currData)}catch(d){n=d,a=!0}var s=!1;if(!c.currData){var l=c.asyncPromiseHandlers;l&&(c.asyncPromiseHandlers=null,(a?l.reject:l.resolve)(n),s=!0)}if(a&&!s)throw n}}),t=!0,r||(c.state=c.State.Unwinding,c.currData=c.allocateData(),typeof MainLoop<"u"&&MainLoop.func&&MainLoop.pause(),U(()=>rr(c.currData)))}else c.state===c.State.Rewinding?(c.state=c.State.Normal,U(nr),Ce(c.currData),c.currData=null,c.sleepCallbacks.forEach(ue)):F(`invalid state: ${c.state}`);return c.handleSleepReturnValue}},handleAsync:e=>c.handleSleep(r=>{e().then(r)})};let $={},ut=new TextEncoder;y.wasmBinary&&(b=y.wasmBinary);var Ce,J,Ne,Te,Fe,Ie,u,Me,Ue,De,Pe,Oe,K,Ee,Be,We,He,Le,Ve,ze,qe,$e,Je,Ke,Ge,Xe,Ye,Qe,Ze,xe,er,ft,vt,rr,tr,ir,nr,D,_t;function yt(e){Ce=e.X,J=e.Y,Ne=y._main=e.Z,Te=e._,Fe=e.$,Ie=e.aa,u=y._setThrew=e.ba,Me=e.ca,Ue=e.da,De=e.ea,Pe=e.fa,Oe=e.ga,K=o.vi=e.ha,Ee=o.vii=e.ia,Be=o.iii=e.ja,We=o.iiii=e.ka,He=o.ii=e.la,Le=o.viiii=e.ma,Ve=o.viiiii=e.na,ze=o.viiiiii=e.oa,qe=o.viii=e.pa,$e=o.iijj=e.qa,Je=o.jiii=e.ra,Ke=o.viiiiiii=e.sa,Ge=o.iiiiii=e.ta,Xe=o.ij=e.ua,Ye=o.iiiii=e.va,Qe=o.v=e.wa,Ze=o.vijjjj=e.xa,xe=o.i=e.ya,er=o.ji=e.za,ft=o.jiji=e.Aa,vt=o.iidiiii=e.Ba,rr=e.Ca,tr=e.Da,ir=e.Ea,nr=e.Fa,D=e.V,_t=e.__indirect_function_table}var dt={U:jr,a:Nr,T:Fr,f:Ir,S:Mr,K:Ur,J:Dr,I:Pr,H:Er,R:Vr,G:me,F:pe,E:we,D:ke,C:zr,B:qr,A:Se,z:$r,y:ve,x:Xr,Q:Zr,P:xr,w:oe,O:et,N:rt,q:nt,k:Tt,g:kt,i:bt,h:wt,l:Ct,n:Ft,v:Rt,u:It,t:Dt,s:Nt,m:Mt,b:ht,c:pt,e:mt,j:St,d:gt,p:At,r:jt,o:Ut,M:le,L:ct};function ht(e,r){var t=v();try{K(e,r)}catch(i){if(f(t),i!==i+0)throw i;u(1,0)}}function gt(e,r,t,i,n,a){var s=v();try{Ve(e,r,t,i,n,a)}catch(l){if(f(s),l!==l+0)throw l;u(1,0)}}function mt(e,r,t,i){var n=v();try{qe(e,r,t,i)}catch(a){if(f(n),a!==a+0)throw a;u(1,0)}}function pt(e,r,t){var i=v();try{Ee(e,r,t)}catch(n){if(f(i),n!==n+0)throw n;u(1,0)}}function wt(e,r,t,i){var n=v();try{return We(e,r,t,i)}catch(a){if(f(n),a!==a+0)throw a;u(1,0)}}function kt(e,r){var t=v();try{return He(e,r)}catch(i){if(f(t),i!==i+0)throw i;u(1,0)}}function St(e,r,t,i,n){var a=v();try{Le(e,r,t,i,n)}catch(s){if(f(a),s!==s+0)throw s;u(1,0)}}function At(e,r,t,i,n,a,s){var l=v();try{ze(e,r,t,i,n,a,s)}catch(d){if(f(l),d!==d+0)throw d;u(1,0)}}function bt(e,r,t){var i=v();try{return Be(e,r,t)}catch(n){if(f(i),n!==n+0)throw n;u(1,0)}}function Rt(e,r,t,i){var n=v();try{return $e(e,r,t,i)}catch(a){if(f(n),a!==a+0)throw a;u(1,0)}}function jt(e,r,t,i,n,a,s,l){var d=v();try{Ke(e,r,t,i,n,a,s,l)}catch(G){if(f(d),G!==G+0)throw G;u(1,0)}}function Ct(e,r,t,i,n){var a=v();try{return Ye(e,r,t,i,n)}catch(s){if(f(a),s!==s+0)throw s;u(1,0)}}function Nt(e,r,t,i){var n=v();try{return Je(e,r,t,i)}catch(a){if(f(n),a!==a+0)throw a;return u(1,0),0n}}function Tt(e){var r=v();try{return xe(e)}catch(t){if(f(r),t!==t+0)throw t;u(1,0)}}function Ft(e,r,t,i,n,a){var s=v();try{return Ge(e,r,t,i,n,a)}catch(l){if(f(s),l!==l+0)throw l;u(1,0)}}function It(e,r){var t=v();try{return Xe(e,r)}catch(i){if(f(t),i!==i+0)throw i;u(1,0)}}function Mt(e){var r=v();try{Qe(e)}catch(t){if(f(r),t!==t+0)throw t;u(1,0)}}function Ut(e,r,t,i,n,a){var s=v();try{Ze(e,r,t,i,n,a)}catch(l){if(f(s),l!==l+0)throw l;u(1,0)}}function Dt(e,r){var t=v();try{return er(e,r)}catch(i){if(f(t),i!==i+0)throw i;return u(1,0),0n}}function ar(e=[]){var r=Ne;e.unshift(Y);var t=e.length,i=je((t+1)*4),n=i;e.forEach(s=>{_[n>>2]=lt(s),n+=4}),_[n>>2]=0;try{var a=r(t,i);return se(a,!0),a}catch(s){return H(s)}}function Pt(e=sr){function r(){if(y.calledRun=!0,!g){gr(),ee?.(y);var t=!0;t||ar(e)}}r()}var w;return w=await Rr(),Pt(),ie?P=y:P=new Promise((e,r)=>{ee=e,re=r}),P}var zt=Ot;export{zt as default};
//# sourceMappingURL=scare.js.map
